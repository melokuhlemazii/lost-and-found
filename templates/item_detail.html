{% extends "base.html" %}

{% block content %}
<div class="container mt-5">
    <div class="row justify-content-center">
        <div class="col-lg-10">
            <div class="card item-details-card fade-in-up">
                <div class="card-header bg-primary text-white">
                    <h2 class="mb-0">{{ item_type.title() }} Item Details</h2>
                </div>
                <div class="card-body">
                    <div class="row">
                        <div class="col-md-5 text-center">
                            {% if item.photo_filename %}
                                <img src="{{ url_for('uploaded_file', filename=item.photo_filename) }}" alt="{{ item.item_name }}" class="img-fluid rounded item-photo mb-3">
                            {% else %}
                                <div class="photo-placeholder">
                                    <i class="fas fa-image fa-5x text-light"></i>
                                    <p>No Photo Available</p>
                                </div>
                            {% endif %}
                        </div>
                        <div class="col-md-7">
                            <h3>{{ item.item_name }}</h3>
                            <p class="text-muted">{{ item.description }}</p>
                            <hr>
                            <dl class="row">
                                <dt class="col-sm-4">Category</dt>
                                <dd class="col-sm-8">{{ item.category }}</dd>

                                <dt class="col-sm-4">Status</dt>
                                <dd class="col-sm-8"><span class="badge bg-{{ 'success' if item.status == 'active' else 'warning' }}">{{ item.status }}</span></dd>

                                <dt class="col-sm-4">Date Reported</dt>
                                <dd class="col-sm-8">{{ item.created_at.strftime('%Y-%m-%d %H:%M') }}</dd>

                                {% if item_type == 'lost' %}
                                    <dt class="col-sm-4">Lost At</dt>
                                    <dd class="col-sm-8">{{ item.location }}</dd>
                                {% else %}
                                    <dt class="col-sm-4">Found At</dt>
                                    <dd class="col-sm-8">{{ item.location }}</dd>

                                    <dt class="col-sm-4">Current Location</dt>
                                    <dd class="col-sm-8">{{ item.current_location }}</dd>
                                {% endif %}
                            </dl>
                        </div>
                    </div>
                </div>
            </div>

            {% if current_user.is_authenticated and item.status == 'active' and current_user.email != item.student_email %}
            <div class="card mt-4 fade-in-up">
                <div class="card-body text-center">
                    <h4 class="card-title">Is This Your Item?</h4>
                    <p class="card-text">If this item belongs to you, please submit a claim to start the recovery process.</p>
                    <a href="{{ url_for('claim', item_type=item_type, item_id=item.id) }}" class="btn btn-success btn-lg">
                        <i class="fas fa-hand-paper me-2"></i>Claim This Item
                    </a>
                </div>
            </div>
            {% endif %}

            <div class="card mt-4 fade-in-up">
                <div class="card-body text-center">
                    <h4 class="card-title">Quick Actions</h4>
                    <a href="{{ url_for('browse_lost_items' if item_type == 'lost' else 'browse_found_items') }}" class="btn btn-outline-secondary m-1"><i class="fas fa-arrow-left me-2"></i>Back to Browse</a>
                    <a href="{{ url_for('search_items') }}" class="btn btn-outline-primary m-1"><i class="fas fa-search me-2"></i>Search More</a>
                    {% if current_user.is_authenticated %}
                        <a href="{{ url_for('user_dashboard') }}" class="btn btn-outline-info m-1"><i class="fas fa-tachometer-alt me-2"></i>My Dashboard</a>
                    {% endif %}
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}