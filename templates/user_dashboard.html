
{% extends "base.html" %}
{% block content %}
<div class="space-y-10">
  <!-- Profile / Header -->
  <div class="rounded-2xl border border-gray-200 bg-white shadow-sm p-6 flex flex-col sm:flex-row items-center gap-6">
	  <img src="https://ui-avatars.com/api/?name={{ current_user.username }}&size=96&background=6366f1&color=fff&bold=true" alt="Profile" class="h-24 w-24 rounded-full ring-4 ring-primary-100 object-cover" />
	  <div class="flex-1 text-center sm:text-left">
		  <h1 class="text-xl font-semibold text-primary-700">Welcome back, {{ current_user.username }}!</h1>
		  <p class="text-sm text-gray-500 mt-1 flex items-center justify-center sm:justify-start gap-2"><i class="fas fa-envelope"></i><span>{{ current_user.email }}</span></p>
		  <div class="mt-2 flex flex-wrap justify-center sm:justify-start gap-2">
			  <span class="inline-flex items-center gap-1 rounded-full bg-indigo-100 px-3 py-1 text-xs font-medium text-indigo-700"><i class="fas fa-user-tag"></i>{{ current_user.role|title }}</span>
			  <span class="inline-flex items-center gap-1 rounded-full bg-gray-100 px-3 py-1 text-xs font-medium text-gray-700"><i class="fas fa-calendar"></i>Member since {{ current_user.created_at.strftime('%Y-%m-%d') }}</span>
		  </div>
	  </div>
  </div>

  <!-- Quick primary actions -->
  <div class="grid sm:grid-cols-3 gap-4">
	  <a href="{{ url_for('report_lost_item') }}" class="group relative overflow-hidden rounded-xl border border-red-200 bg-gradient-to-br from-red-50 to-white p-5 flex flex-col gap-3 hover:shadow-md transition">
		  <div class="flex items-center justify-between">
			  <span class="flex h-10 w-10 items-center justify-center rounded-lg bg-red-100 text-red-600"><i class="fas fa-exclamation-triangle"></i></span>
			  <i class="fas fa-arrow-right text-red-400 group-hover:translate-x-1 transition"></i>
		  </div>
		  <div>
			  <p class="font-medium text-red-700 text-sm">Report Lost Item</p>
			  <p class="text-xs text-red-600/70 mt-1">Submit a lost item details</p>
		  </div>
	  </a>
	  <a href="{{ url_for('report_found_item') }}" class="group relative overflow-hidden rounded-xl border border-green-200 bg-gradient-to-br from-green-50 to-white p-5 flex flex-col gap-3 hover:shadow-md transition">
		  <div class="flex items-center justify-between">
			  <span class="flex h-10 w-10 items-center justify-center rounded-lg bg-green-100 text-green-600"><i class="fas fa-hand-holding-heart"></i></span>
			  <i class="fas fa-arrow-right text-green-400 group-hover:translate-x-1 transition"></i>
		  </div>
		  <div>
			  <p class="font-medium text-green-700 text-sm">Report Found Item</p>
			  <p class="text-xs text-green-600/70 mt-1">Help return an item</p>
		  </div>
	  </a>
	  <a href="{{ url_for('claim') }}" class="group relative overflow-hidden rounded-xl border border-primary-200 bg-gradient-to-br from-primary-50 to-white p-5 flex flex-col gap-3 hover:shadow-md transition">
		  <div class="flex items-center justify-between">
			  <span class="flex h-10 w-10 items-center justify-center rounded-lg bg-primary-100 text-primary-600"><i class="fas fa-gavel"></i></span>
			  <i class="fas fa-arrow-right text-primary-400 group-hover:translate-x-1 transition"></i>
		  </div>
		  <div>
			  <p class="font-medium text-primary-700 text-sm">Claim an Item</p>
			  <p class="text-xs text-primary-600/70 mt-1">Submit a claim request</p>
		  </div>
	  </a>
  </div>

  <div class="grid lg:grid-cols-2 gap-8">
	  <!-- Lost Items -->
	  <div class="space-y-4">
		  <div class="flex items-center justify-between">
			  <h2 class="text-sm font-semibold text-gray-700 flex items-center gap-2"><i class="fas fa-exclamation-triangle text-red-500"></i> My Lost Items</h2>
		  </div>
		  <div class="space-y-4">
			{% if user_lost_items %}
			  {% for item in user_lost_items %}
			  <div class="rounded-lg border border-gray-200 bg-white p-4 flex gap-4 shadow-sm hover:shadow transition">
				  {% if item.photo_filename %}
				  <a href="{{ url_for('lost_item_detail', item_id=item.id) }}" class="block h-20 w-20 flex-shrink-0 overflow-hidden rounded-md bg-gray-100">
					  <img src="{{ url_for('uploaded_file', filename=item.photo_filename) }}" alt="{{ item.item_name }}" class="h-full w-full object-cover" />
				  </a>
				  {% endif %}
				  <div class="flex-1 min-w-0">
					  <div class="flex items-start justify-between gap-3">
						  <h3 class="text-sm font-medium text-gray-900 truncate">{{ item.item_name }}</h3>
						  {% set badge = 'bg-emerald-100 text-emerald-700 border-emerald-200' if item.status=='claimed' else 'bg-amber-100 text-amber-700 border-amber-200' if item.status=='active' else 'bg-gray-100 text-gray-700 border-gray-200' %}
						  <span class="inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-medium {{ badge }}">{{ item.status|title }}</span>
					  </div>
					  <div class="mt-2 flex flex-wrap gap-3 text-xs text-gray-500">
						  <span class="inline-flex items-center gap-1"><i class="fas fa-tag"></i>{{ item.category }}</span>
						  <span class="inline-flex items-center gap-1"><i class="fas fa-map-marker-alt"></i>{{ item.location }}</span>
						  <span class="inline-flex items-center gap-1"><i class="fas fa-calendar"></i>{{ item.created_at.strftime('%Y-%m-%d') }}</span>
					  </div>
					  <div class="mt-3 flex items-center gap-3">
						  <a href="{{ url_for('lost_item_detail', item_id=item.id) }}" class="inline-flex items-center gap-1 rounded-md border border-primary-200 bg-primary-50 px-3 py-1.5 text-xs font-medium text-primary-700 hover:bg-primary-100"><i class="fas fa-eye"></i>View</a>
					  </div>
				  </div>
			  </div>
			  {% endfor %}
			{% else %}
			  <p class="text-sm text-gray-500 text-center py-6 border border-dashed border-gray-300 rounded-lg">You haven't reported any lost items yet.</p>
			{% endif %}
		  </div>
	  </div>

	  <!-- Found Items -->
	  <div class="space-y-4">
		  <div class="flex items-center justify-between">
			  <h2 class="text-sm font-semibold text-gray-700 flex items-center gap-2"><i class="fas fa-hand-holding-heart text-green-600"></i> My Found Items</h2>
		  </div>
		  <div class="space-y-4">
			{% if user_found_items %}
			  {% for item in user_found_items %}
			  <div class="rounded-lg border border-gray-200 bg-white p-4 flex gap-4 shadow-sm hover:shadow transition">
				  {% if item.photo_filename %}
				  <a href="{{ url_for('found_item_detail', item_id=item.id) }}" class="block h-20 w-20 flex-shrink-0 overflow-hidden rounded-md bg-gray-100">
					  <img src="{{ url_for('uploaded_file', filename=item.photo_filename) }}" alt="{{ item.item_name }}" class="h-full w-full object-cover" />
				  </a>
				  {% endif %}
				  <div class="flex-1 min-w-0">
					  <div class="flex items-start justify-between gap-3">
						  <h3 class="text-sm font-medium text-gray-900 truncate">{{ item.item_name }}</h3>
						  {% set badge = 'bg-emerald-100 text-emerald-700 border-emerald-200' if item.status=='claimed' else 'bg-amber-100 text-amber-700 border-amber-200' if item.status=='active' else 'bg-gray-100 text-gray-700 border-gray-200' %}
						  <span class="inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-medium {{ badge }}">{{ item.status|title }}</span>
					  </div>
					  <div class="mt-2 flex flex-wrap gap-3 text-xs text-gray-500">
						  <span class="inline-flex items-center gap-1"><i class="fas fa-tag"></i>{{ item.category }}</span>
						  <span class="inline-flex items-center gap-1"><i class="fas fa-map-marker-alt"></i>{{ item.location }}</span>
						  <span class="inline-flex items-center gap-1"><i class="fas fa-home"></i>{{ item.current_location }}</span>
						  <span class="inline-flex items-center gap-1"><i class="fas fa-calendar"></i>{{ item.created_at.strftime('%Y-%m-%d') }}</span>
					  </div>
					  <div class="mt-3 flex items-center gap-3">
						  <a href="{{ url_for('found_item_detail', item_id=item.id) }}" class="inline-flex items-center gap-1 rounded-md border border-primary-200 bg-primary-50 px-3 py-1.5 text-xs font-medium text-primary-700 hover:bg-primary-100"><i class="fas fa-eye"></i>View</a>
					  </div>
				  </div>
			  </div>
			  {% endfor %}
			{% else %}
			  <p class="text-sm text-gray-500 text-center py-6 border border-dashed border-gray-300 rounded-lg">You haven't reported any found items yet.</p>
			{% endif %}
		  </div>
	  </div>
  </div>

  <div class="grid lg:grid-cols-2 gap-8">
	  <!-- Claims -->
	  <div class="space-y-4">
		  <h2 class="text-sm font-semibold text-gray-700 flex items-center gap-2"><i class="fas fa-gavel text-primary-600"></i> My Claims</h2>
		  <div class="space-y-4">
			{% if user_claims %}
				{% for claim in user_claims %}
				<div class="rounded-lg border border-gray-200 bg-white p-4 shadow-sm hover:shadow transition">
					<div class="flex items-start justify-between gap-3">
						<h3 class="text-sm font-medium text-gray-900">Claim for {{ claim.item_type }} item</h3>
						{% set cbadge = 'bg-emerald-100 text-emerald-700 border-emerald-200' if claim.status=='approved' else 'bg-red-100 text-red-700 border-red-200' if claim.status=='rejected' else 'bg-amber-100 text-amber-700 border-amber-200' %}
						<span class="inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-medium {{ cbadge }}">{{ claim.status|title }}</span>
					</div>
					<p class="mt-2 text-xs text-gray-600 leading-relaxed">{{ claim.description }}</p>
					<div class="mt-3 flex flex-wrap gap-4 text-xs text-gray-500">
						<span class="inline-flex items-center gap-1"><i class="fas fa-calendar"></i>{{ claim.created_at.strftime('%Y-%m-%d') }}</span>
						{% if claim.admin_notes %}<span class="inline-flex items-center gap-1 text-gray-600"><i class="fas fa-comment"></i>{{ claim.admin_notes }}</span>{% endif %}
					</div>
				</div>
				{% endfor %}
			{% else %}
				<p class="text-sm text-gray-500 text-center py-6 border border-dashed border-gray-300 rounded-lg">You haven't submitted any claims yet.</p>
			{% endif %}
		  </div>
	  </div>

	  <!-- Recent Activity -->
	  <div class="space-y-4">
		  <h2 class="text-sm font-semibold text-gray-700 flex items-center gap-2"><i class="fas fa-history text-indigo-600"></i> Recent Activity</h2>
		  <div class="space-y-4">
			{% if user_activities %}
			  {% for activity in user_activities %}
			  <div class="rounded-lg border border-gray-200 bg-white p-4 shadow-sm hover:shadow transition">
				  <div class="flex items-center justify-between">
					  <h3 class="text-sm font-medium text-gray-900">{{ activity.action|title }}</h3>
					  <span class="text-xs text-gray-500 flex items-center gap-1"><i class="fas fa-clock"></i>{{ activity.created_at.strftime('%Y-%m-%d %H:%M') }}</span>
				  </div>
				  <p class="mt-2 text-xs text-gray-600">{{ activity.details or 'No details' }}</p>
			  </div>
			  {% endfor %}
			{% else %}
			  <p class="text-sm text-gray-500 text-center py-6 border border-dashed border-gray-300 rounded-lg">No recent activity.</p>
			{% endif %}
		  </div>
	  </div>
  </div>

  <!-- Quick Actions -->
  <div class="rounded-2xl border border-gray-200 bg-white shadow-sm p-6">
	  <h2 class="text-sm font-semibold text-gray-700 mb-5 flex items-center gap-2"><i class="fas fa-cogs text-primary-600"></i> Quick Actions</h2>
	  <div class="grid sm:grid-cols-4 gap-4">
		  <a href="{{ url_for('user_profile') }}" class="flex flex-col items-center gap-2 rounded-lg border border-primary-200 bg-primary-50 px-4 py-4 text-xs font-medium text-primary-700 hover:bg-primary-100"><i class="fas fa-user text-sm"></i><span>Edit Profile</span></a>
		  <a href="{{ url_for('change_password') }}" class="flex flex-col items-center gap-2 rounded-lg border border-amber-200 bg-amber-50 px-4 py-4 text-xs font-medium text-amber-700 hover:bg-amber-100"><i class="fas fa-key text-sm"></i><span>Password</span></a>
		  <a href="{{ url_for('search_items') }}" class="flex flex-col items-center gap-2 rounded-lg border border-indigo-200 bg-indigo-50 px-4 py-4 text-xs font-medium text-indigo-700 hover:bg-indigo-100"><i class="fas fa-search text-sm"></i><span>Search Items</span></a>
		  <a href="{{ url_for('browse_lost_items') }}" class="flex flex-col items-center gap-2 rounded-lg border border-red-200 bg-red-50 px-4 py-4 text-xs font-medium text-red-700 hover:bg-red-100"><i class="fas fa-exclamation-triangle text-sm"></i><span>Browse Lost</span></a>
	  </div>
  </div>
</div>
{% endblock %}



